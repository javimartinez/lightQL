<html><head><meta charset="utf-8" /><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" /><title>lightQL</title><meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="description" content="A minimal external search DSL that compiles to Scala" /><meta name="author" content="Tecsisa" /><meta name="og:image" content="/lightQL/img/poster.png" /><meta name="og:title" content="lightQL" /><meta name="og:site_name" content="lightQL" /><meta name="og:url" content="http://www.tecsisa.com" /><meta name="og:type" content="website" /><meta name="og:description" content="A minimal external search DSL that compiles to Scala" /><meta name="twitter:image" content="/lightQL/img/poster.png" /><meta name="twitter:card" content="summary_large_image" /><meta name="twitter:site" content="" /><link rel="icon" type="image/png" href="/lightQL/img/favicon.png" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" /><link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css" /><link rel="stylesheet" href="/lightQL/highlight/styles/default.css" /><link rel="stylesheet" href="/lightQL/css/style.css" /><link rel="stylesheet" href="/lightQL/css/palette.css" /><link rel="stylesheet" href="/lightQL/css/override.css" /></head><body><header id="site-header"><div class="navbar-wrapper"><div class="container"><div class="row"><div class="col-xs-6"><a href="/lightQL/" class="brand"><div class="icon-wrapper"><span>lightQL</span></div></a></div><div class="col-xs-6"><nav class="text-right"><ul class=""><li><a href="https://github.com/Tecsisa/lightQL"><i class="fa fa-github"></i><span class="hidden-xs">GitHub</span></a></li><li><a href="api/#com.tecsisa.lightql.parser.LightqlParser$"><i class="fa fa-file-text"></i><span class="hidden-xs">Documentation</span></a></li></ul></nav></div></div></div></div><div class="jumbotron"><div class="container"><h1 class="text-center">A minimal external search DSL that compiles to Scala</h1><h2></h2><p class="text-center"><a href="https://github.com/Tecsisa/lightQL" class="btn btn-outline-inverse">View on GitHub</a></p></div></div><div><ul class="horizontalNav">       <li><a class="" href="/lightQL/constructing.html">Constructing lightQL queries</a></li>  <li><a class="" href="/lightQL/term_types.html">Term types</a></li>  <li><a class="" href="/lightQL/supported.html">Supported queries</a></li>  <li><a class="" href="/lightQL/contributing.html">Contributing</a></li> </ul></div></header><main id="site-main"><section class="use"><div class="container"><div id="content"><p><a href="https://travis-ci.org/Tecsisa/lightQL"><img src="https://travis-ci.org/Tecsisa/lightQL.svg?branch=master" alt="Build Status" /></a></p>

<table>
  <thead>
    <tr>
      <th style="text-align: left">Artifact</th>
      <th style="text-align: center">Maven Central</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td style="text-align: left">lightql-dsl</td>
      <td style="text-align: center"><a href="https://maven-badges.herokuapp.com/maven-central/com.tecsisa/lightql-dsl_2.11"><img src="https://img.shields.io/maven-central/v/com.tecsisa/lightql-dsl_2.11.svg" alt="Maven Central" /></a></td>
    </tr>
    <tr>
      <td style="text-align: left">lightql-elastic</td>
      <td style="text-align: center"><a href="https://maven-badges.herokuapp.com/maven-central/com.tecsisa/lightql-elastic_2.11"><img src="https://img.shields.io/maven-central/v/com.tecsisa/lightql-elastic_2.11.svg" alt="Maven Central" /></a></td>
    </tr>
  </tbody>
</table>

<p>lightQL a minimal external search DSL that compiles to a Scala AST and can be materialized to other target languages (a.k.a. APIs),
e.g. the <a href="https://www.elastic.co/guide/en/elasticsearch/client/java-api/current/java-query-dsl.html">Elasticsearch API</a>. Used in conjunction with <a href="https://github.com/sksamuel/elastic4s">elastic4s</a>,
lightQL can deliver a better developer experience regarding the work with <a href="https://www.elastic.co/products/elasticsearch">Elasticsearch</a>,
especially in simple scenarios where advanced searching capabilities are not required.</p>

<h2 id="quick-start">Quick start</h2>

<p>lightQL is published to <a href="https://bintray.com/bintray/jcenter">Bintray jcenter</a> and synchronized
to <a href="http://search.maven.org/">Maven Central</a> (albeit the latter is not an exact science). The library is
cross-built both for Scala 2.11 and 2.12.</p>

<p>In order to work with the Elasticsearch materializer (the only available for the time being),
just include the proper SBT configuration<sup id="fnref:1sbt"><a href="#fn:1sbt" class="footnote">1</a></sup>:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"com.tecsisa"</span> <span class="o">%%</span> <span class="s">"lightql-elastic"</span> <span class="o">%</span> <span class="s">"5.0.3"</span>
</code></pre>
</div>

<p>Then, open a SBT REPL session and try this sequence of commands:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">com.tecsisa.lightql.parser._</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="n">tecsisa</span><span class="o">.</span><span class="n">lightql</span><span class="o">.</span><span class="n">mat</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="k">_</span>
<span class="k">import</span> <span class="nn">com.tecsisa.lightql.parser._</span>
<span class="k">import</span> <span class="nn">com.tecsisa.lightql.mat.elastic._</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">val</span> <span class="n">qs</span> <span class="k">=</span> <span class="s">"foo = 100"</span>
<span class="n">qs</span><span class="k">:</span> <span class="kt">String</span> <span class="o">=</span> <span class="n">foo</span> <span class="k">=</span> <span class="mi">100</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">materialize</span><span class="o">(</span><span class="n">parse</span><span class="o">(</span><span class="n">qs</span><span class="o">).</span><span class="n">get</span><span class="o">.</span><span class="n">value</span><span class="o">)</span>
<span class="n">res0</span><span class="k">:</span> <span class="kt">org.elasticsearch.index.query.QueryBuilder</span> <span class="o">=</span>
<span class="o">{</span>
  <span class="s">"term"</span> <span class="k">:</span> <span class="o">{</span>
    <span class="err">"</span><span class="kt">foo</span><span class="err">"</span> <span class="kt">:</span> <span class="o">{</span>
      <span class="err">"</span><span class="kt">value</span><span class="err">"</span> <span class="kt">:</span> <span class="err">100</span><span class="o">,</span>
      <span class="err">"</span><span class="kt">boost</span><span class="err">"</span> <span class="kt">:</span> <span class="err">1</span><span class="kt">.</span><span class="err">0</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<p>On the other hand, if you’re a happy <a href="https://github.com/sksamuel/elastic4s">elastic4s</a> user (and sure you are) you’ll be able to take advantage
of the seamless integration between these two libraries and declare search expressions easily:</p>

<div class="language-scala highlighter-rouge"><pre class="highlight"><code><span class="n">scala</span><span class="o">&gt;</span> <span class="k">import</span> <span class="nn">com.tecsisa.lightql.parser._</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="n">tecsisa</span><span class="o">.</span><span class="n">lightql</span><span class="o">.</span><span class="n">mat</span><span class="o">.</span><span class="n">elastic</span><span class="o">.</span><span class="k">_</span><span class="o">,</span> <span class="n">com</span><span class="o">.</span><span class="n">sksamuel</span><span class="o">.</span><span class="n">elastic4s</span><span class="o">.</span><span class="nc">ElasticDsl</span><span class="o">.</span><span class="k">_</span>
<span class="k">import</span> <span class="nn">com.tecsisa.lightql.parser._</span>
<span class="k">import</span> <span class="nn">com.tecsisa.lightql.mat.elastic._</span>
<span class="k">import</span> <span class="nn">com.sksamuel.elastic4s.ElasticDsl._</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="k">def</span> <span class="n">q</span><span class="o">(</span><span class="n">qs</span><span class="k">:</span> <span class="kt">String</span><span class="o">)</span> <span class="k">=</span> <span class="n">parse</span><span class="o">(</span><span class="n">qs</span><span class="o">).</span><span class="n">get</span><span class="o">.</span><span class="n">value</span>
<span class="n">q</span><span class="k">:</span> <span class="o">(</span><span class="kt">qs:</span> <span class="kt">String</span><span class="o">)</span><span class="kt">com.tecsisa.lightql.ast.Query</span>

<span class="n">scala</span><span class="o">&gt;</span> <span class="n">search</span><span class="o">(</span><span class="s">"songs"</span><span class="o">)</span> <span class="n">query</span> <span class="n">q</span><span class="o">(</span><span class="s">"composer = \"Johann Sebastian Bach\""</span><span class="o">)</span>
<span class="n">res1</span><span class="k">:</span> <span class="kt">com.sksamuel.elastic4s.searches.SearchDefinition</span> <span class="o">=</span>
<span class="o">{</span>
  <span class="s">"query"</span> <span class="k">:</span> <span class="o">{</span>
    <span class="err">"</span><span class="kt">term</span><span class="err">"</span> <span class="kt">:</span> <span class="o">{</span>
      <span class="err">"</span><span class="kt">composer</span><span class="err">"</span> <span class="kt">:</span> <span class="o">{</span>
        <span class="err">"</span><span class="kt">value</span><span class="err">"</span> <span class="kt">:</span> <span class="err">"</span><span class="kt">Johann</span> <span class="kt">Sebastian</span> <span class="kt">Bach</span><span class="err">"</span><span class="o">,</span>
        <span class="err">"</span><span class="kt">boost</span><span class="err">"</span> <span class="kt">:</span> <span class="err">1</span><span class="kt">.</span><span class="err">0</span>
      <span class="o">}</span>
    <span class="o">}</span>
  <span class="o">},</span>
  <span class="s">"ext"</span> <span class="k">:</span> <span class="o">{</span> <span class="o">}</span>
<span class="o">}</span>
</code></pre>
</div>

<h2 id="motivation">Motivation</h2>

<p>Being <a href="https://github.com/sksamuel/elastic4s">elastic4s</a> an amazing Scala EDSL to work with Elasticsearch, you’ll sometimes find yourself
in need of interpreting external queries coming from a web service request or an UI, possibly even written
by end users that might be familiar with popular query languages as SQL or <a href="https://confluence.atlassian.com/jirasoftwarecloud/advanced-searching-764478330.html">JQL</a>.</p>

<p>In that case, what Elasticsearch provides is a <a href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html">JSON based Query DSL</a> that is far from being simple and succinct.
Having to support a lot of features in regards to searching and indexing capabilities, it might be understandable
such a complexity but it’s clear that, at least for simple use cases, this DSL seems overcomplicated.</p>

<p>lightQL is aimed at tackling this problem by providing a more simple language-agnostic query DSL for Elasticsearch.
As an additional advantage, the language grammar is not strongly tied to Elasticsearch although the materializer is, so that
it is always possible to implement new materializers that work in future Elasticsearch versions or even for other back-ends,
as <a href="http://lucene.apache.org/solr/">Solr</a>, that share semantic features with Elasticsearch.</p>

<h2 id="contributions">Contributions</h2>

<p>See <a href="contributing.html">Contributing</a> in order to know how to contribute to this project.</p>

<h2 id="acknowledgments">Acknowledgments</h2>

<p>The lightQL team is especially grateful to <a href="https://github.com/lihaoyi">@lihaoyi</a> for his <a href="https://github.com/lihaoyi/fastparse">fastparse</a>
library whose combinators have been extensively used in the parsing part. Likewise,
it deserves special mention <a href="https://github.com/sksamuel">@sksamuel</a> and his <a href="https://github.com/sksamuel/elastic4s">elastic4s</a> library that makes Scala developers’ life
easier when it comes to working with Elasticsearch.</p>

<h2 id="license">License</h2>

<p>lightQL is licensed under the <strong><a href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a></strong> (the
“License”); you may not use this software except in compliance with the License.</p>

<p>Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an “AS IS” BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License.</p>

<div class="footnotes">
  <ol>
    <li id="fn:1sbt">
      <p>Please, use the 2.3.x installments in case you’re working with Elasticsearch 2.3.x.  Please, raise a ticket in case you need a 2.4.x compatible release. <a href="#fnref:1sbt" class="reversefootnote">&#8617;</a></p>
    </li>
  </ol>
</div>
</div></div></section><section class="technologies"><div class="container"><div class="row"></div></div></section></main><footer id="site-footer"><div class="container"><div class="row"><div class="col-xs-6"><p>lightQL is designed and developed by <a href="http://www.tecsisa.com" target="_blank">Tecsisa</a></p></div><div class="col-xs-6"><p class="text-right"><a href="https://github.com/Tecsisa/lightQL"><span class="fa fa-github"></span>View on Github</a></p></div></div></div></footer><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script><script src="/lightQL/highlight/highlight.pack.js"></script><script>hljs.configure({
languages:['scala','java','bash']
});
hljs.initHighlighting();
             </script></body></html>